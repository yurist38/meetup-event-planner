<link rel="import" href="polymer-elements.html">
<link rel="import" href="login-form.html">
<link rel="import" href="register-form.html">

<dom-module id="login-register">

    <template>

        <iron-localstorage name="userLogged" value="{{ userLogged }}" id="userLoggedToolbar"
            on-iron-localstorage-load-empty="initializeDefaultUser">
        </iron-localstorage>

        <template is="dom-if" if="{{ !userLogged }}">

            <a href="/login" on-tap="onLoginClicked" class="menu-link">
                Login
                <iron-icon icon="icons:chevron-right"></iron-icon>
            </a>

            <paper-dialog id="login-popup"
                entry-animation="scale-up-animation"
                exit-animation="fade-out-animation">

                <iron-pages selected="0" id="login-register-pages">

                    <div id="login-page">
                        <h2>Login</h2>
                        <login-form></login-form>
                        <div class="centered padding">
                            <a href="#" on-tap="switchPage" data-switchto="1">
                                Create new account
                            </a>
                        </div>
                    </div>

                    <div id="register-page">
                        <h2>Create new account</h2>
                        <register-form></register-form>
                        <div class="centered padding">
                            <a href="#" on-tap="switchPage" data-switchto="0">Login</a>
                            to existing account.
                        </div>
                    </div>

                </iron-pages>

            </paper-dialog>
        </template>

        <template is="dom-if" if="{{ userLogged }}">
            <a href="#" on-tap="logout" class="menu-link">
                <iron-icon icon="icons:exit-to-app"></iron-icon>
                Logout
            </a>
        </template>

    </template>

    <script src="js/login-register.js"></script>

</dom-module>
